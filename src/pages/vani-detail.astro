---
import Layout from "../layouts/Layout.astro";

export const prerender = false; // enables SSR

// Sample data for the vani
const vani = {
  title: "Bhagavad-gītā Introduction",
  date: "Feb. 19, 1966",
  location: "New York",
  audio: {
    available: true,
    duration: "45:23",
    url: "../assets/audio/bhagavad-gita-intro.mp3" // Replace with actual audio URL
  }
};

// Sample pages content - in real app this would come from API/database
const pages = [
  {
    pageNum: 1,
    content: `So, ladies and gentlemen, I shall speak tonight about the Bhagavad-gītā. Before beginning Bhagavad-gītā, I think I shall explain first of all the necessity of understanding this great book of knowledge.

We are all searching after knowledge. That is our business. Human life is meant for searching after knowledge. Knowledge means to know things as they are. Just like this finger. What is this finger? This finger is made of bone, muscle, nerve, blood, skin. And if I want to know further, oh, what is this bone? Then I have to study chemistry and I have to know the ingredients of the bone. Similarly, this muscle, this nerve, this blood, this skin—to know them more and more, means I am going to the knowledge of this finger.

So, knowledge means, to understand anything and everything as they are. And that knowledge is absolute knowledge. That is called science. Science means to know things as they are. Now, we are all trying to have knowledge. But what is that knowledge? That knowledge is relative. This relative knowledge means everybody is seeing things according to his own capacity.

Just like the same example, this finger. A child is seeing this finger in a different way than the elderly man is seeing, than an anatomist is seeing, or a physician is seeing, or a chemist is seeing. Everyone is seeing in a different way. Therefore, the knowledge is not absolute; it is relative. Everyone is seeing according to his own capacity.`
  },
//   {
//     pageNum: 2,
//     content: `Now, the question is: Is there any absolute knowledge? Yes, there is absolute knowledge. And that absolute knowledge can be had when you transcend these material senses. Our present conditional stage—our knowledge is being gathered by the perception of these material senses. But beyond this material sense, there is spiritual sense. When you come to the platform of spiritual sense, then you can have absolute knowledge.

// Now, in the Bhagavad-gītā, Arjuna, the great warrior, he was very learned man, politician, and great fighter, and he was the greatest devotee of the Lord. So he was trying to understand things according to his own calculation. But at last he said, "My dear Kṛṣṇa, I shall no more argue with You. Now I am Your disciple. Whatever You'll say, I shall accept."

// This is the process of taking absolute knowledge. When we accept, or when we are prepared to accept knowledge from the superior authority, then we can have absolute knowledge. And Lord Kṛṣṇa is the Supreme Personality of Godhead. He is accepted as such not only in the Vedic literature, but also in the writings of many Western and Eastern philosophers and scholars.`
//   },
//   {
//     pageNum: 3,
//     content: `In the Bhagavad-gītā, you'll find Arjuna is questioning Kṛṣṇa. Just like a student questions the teacher to clear his doubts. And Kṛṣṇa is replying. So the whole Bhagavad-gītā is the dialogue between Kṛṣṇa and Arjuna. And Kṛṣṇa is explaining about Himself.

// "I am this. I am that. I am spirit soul. I am the Supreme. Everything emanates from Me. Everything enters into Me. This is My energy. That is My energy." In this way, throughout the whole book of Bhagavad-gītā, Kṛṣṇa is explaining about Himself.

// And there are philosophers who say that we should not worship Kṛṣṇa, the person, but we should worship the impersonal feature of God. But this is not found anywhere in the Bhagavad-gītā. Everywhere Kṛṣṇa says, "I am this. I am that." And at last, He says, "Just surrender unto Me." So how we can avoid the person and worship the impersonal?

// Therefore, those who are following the principle of the Bhagavad-gītā, they are worshiping Kṛṣṇa, the Supreme Personality of Godhead. And that is the real understanding of the Bhagavad-gītā.`
//   },
//   {
//     pageNum: 4,
//     content: `Now, in this age especially, people are very much fond of reading books. But if you go to read very many books, and if you have no understanding of the essence, then your reading is simply waste of time. Therefore, Caitanya Mahāprabhu, He recommended reading one book. And what is that one book? Bhagavad-gītā.

// If you study Bhagavad-gītā very scrutinizingly, then you'll find all knowledge that is required for human society. All knowledge. Because it is explained by the Supreme Lord Himself. He is the original person. He knows past, present, and future. And He knows everything. Therefore, if we take knowledge from Him, then naturally our knowledge will be perfect.

// This is our proposition. We don't say that we are learned scholars. We simply say that we are servant of the servant of the servant of Kṛṣṇa. And whatever Kṛṣṇa says, we accept. That's all. This is our philosophy. We don't make any interpretation. We don't make any addition or alteration. Simply we present the Bhagavad-gītā as it is. That is our business.

// And we are experiencing that even an ordinary man, if he reads Bhagavad-gītā as it is, without any comment, without any explanation, without any interpretation, he'll understand. Because the language is so nice, so simple, that anyone can understand.`
//   },
//   {
//     pageNum: 5,
//     content: `Now, the whole Bhagavad-gītā is divided into eighteen chapters. And in the first six chapters, Kṛṣṇa explains what is the constitutional position of the living entity. In the next six chapters, from seventh to twelfth, He explains what is the nature of the Supreme Lord. And in the last six chapters, from thirteenth to eighteenth, He explains what is our relationship with the Supreme Lord.

// So, gradually, step by step, one has to understand: What I am? Who is God? What is my relationship with God? This is knowledge. And this knowledge is perfectly explained in the Bhagavad-gītā.

// The whole Bhagavad-gītā can be summarized in one word: "Surrender to God." That's all. After speaking all the Vedānta philosophy, all the yogic process, all the jñāna process—everything—at last Kṛṣṇa summarizes the whole thing: "My dear Arjuna, give up all this nonsense. Just surrender unto Me. I shall give you protection."

// So this is the substance of Bhagavad-gītā. And we request everyone to read Bhagavad-gītā at least once. You'll find everything. Thank you very much.`
//   }
];
---

<Layout page="vani-detail">

  <!-- ================= PAGE HEADER ================= -->
  <section class="bg-white py-6 sm:py-8 lg:py-16">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <!-- Breadcrumb -->
      <nav class="mb-4 sm:mb-6 flex items-center gap-2 text-xs sm:text-sm text-text-body/60">
        <a href="/vani" class="hover:text-primary transition-colors truncate">Vani</a>
        <svg class="w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
        </svg>
        <span class="text-text-body font-medium truncate">{vani.title}</span>
      </nav>

      <h1 class="font-pacifico text-2xl sm:text-3xl md:text-4xl lg:text-5xl text-primary mb-3 sm:mb-4 break-words">
        {vani.title}
      </h1>
      
      <span class="block w-16 sm:w-20 h-1 bg-primary rounded-full"></span>
    </div>
  </section>

  <!-- ── Strip divider ── -->
  <div class="h-2 bg-primary-hover"></div>

  <!-- ================= MAIN CONTENT ================= -->
  <section class="bg-section-bg min-h-screen">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8 lg:py-12">

      <!-- Meta info -->
      <div class="flex flex-wrap items-center gap-3 sm:gap-4 text-xs sm:text-sm text-text-body/70 mb-6 sm:mb-8">
        <div class="flex items-center gap-1.5 sm:gap-2">
          <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          <span>{vani.date}</span>
        </div>
        <div class="flex items-center gap-1.5 sm:gap-2">
          <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
          <span>{vani.location}</span>
        </div>
        {vani.audio.available && (
          <div class="flex items-center gap-1.5 sm:gap-2">
            <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0 text-primary" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
            </svg>
            <span class="text-primary font-medium">{vani.audio.duration}</span>
          </div>
        )}
      </div>

      <!-- Audio Player (Mobile - Top Position) -->
      {vani.audio.available && (
        <div class="lg:hidden mb-6">
          <div class="bg-white rounded-xl border border-text-body/10 shadow-sm overflow-hidden p-4">
            <h3 class="text-sm font-bold text-text-body mb-3">Audio Player</h3>
            
            <div class="bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl p-3 sm:p-4 border border-primary/20">
              <!-- Waveform visualization placeholder -->
              <div class="flex items-center justify-center gap-0.5 sm:gap-1 h-12 sm:h-16 mb-3">
                {Array.from({ length: 30 }).map((_, i) => (
                  <div 
                    class="waveform-bar bg-primary/30 w-0.5 sm:w-1 rounded-full transition-all duration-200"
                    style={`height: ${Math.random() * 60 + 20}%`}
                  ></div>
                ))}
              </div>

              <!-- Progress bar -->
              <div class="mb-3">
                <input 
                  type="range" 
                  id="audio-progress" 
                  class="audio-slider w-full h-1.5 bg-primary/20 rounded-full appearance-none cursor-pointer"
                  min="0" 
                  max="100" 
                  value="0"
                />
                <div class="flex justify-between items-center mt-1.5 text-xs text-text-body/60">
                  <span id="current-time">0:00</span>
                  <span id="total-time">{vani.audio.duration}</span>
                </div>
              </div>

              <!-- Controls -->
              <div class="flex items-center justify-center gap-2 sm:gap-3">
                <!-- Rewind 10s -->
                <button
                  type="button"
                  id="rewind-btn"
                  class="p-1.5 sm:p-2 text-text-body/60 hover:text-primary active:text-primary transition-colors"
                  title="Rewind 10 seconds"
                >
                  <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"/>
                  </svg>
                </button>

                <!-- Play/Pause -->
                <button
                  type="button"
                  id="play-pause-btn"
                  class="w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center bg-primary text-white rounded-full shadow-lg transition-all duration-200 hover:bg-primary-hover hover:shadow-xl hover:scale-105 active:scale-95"
                >
                  <svg id="play-icon" class="w-5 h-5 sm:w-6 sm:h-6 ml-0.5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z"/>
                  </svg>
                  <svg id="pause-icon" class="w-5 h-5 sm:w-6 sm:h-6 hidden" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                  </svg>
                </button>

                <!-- Forward 10s -->
                <button
                  type="button"
                  id="forward-btn"
                  class="p-1.5 sm:p-2 text-text-body/60 hover:text-primary active:text-primary transition-colors"
                  title="Forward 10 seconds"
                >
                  <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"/>
                  </svg>
                </button>

                <!-- Volume -->
                <button
                  type="button"
                  id="volume-btn"
                  class="p-1.5 sm:p-2 text-text-body/60 hover:text-primary active:text-primary transition-colors"
                >
                  <svg id="volume-icon" class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                  </svg>
                  <svg id="mute-icon" class="w-4 h-4 sm:w-5 sm:h-5 hidden" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"/>
                  </svg>
                </button>
              </div>

              <!-- Download button -->
              <a
                href={vani.audio.url}
                download
                class="mt-3 sm:mt-4 w-full flex items-center justify-center gap-2 bg-white border border-primary/30 text-primary px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-xs sm:text-sm font-semibold shadow-sm transition-all duration-200 hover:bg-primary hover:text-white hover:border-primary active:scale-95"
              >
                <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                </svg>
                Download Audio
              </a>
            </div>
          </div>
        </div>
      )}

      <div class="grid lg:grid-cols-[280px_1fr] gap-6 lg:gap-8">

        <!-- ============ SIDEBAR ============ -->
        <aside class="lg:sticky lg:top-6 self-start">
          <div class="bg-white rounded-xl border border-text-body/10 shadow-sm overflow-hidden">

            <!-- Audio Player (Desktop only) -->
            {vani.audio.available && (
              <div class="hidden lg:block p-4">
                <h3 class="text-sm font-bold text-text-body mb-3 px-2">Audio Player</h3>
                
                <div class="bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl p-3 sm:p-4 border border-primary/20">
                  <!-- Waveform visualization placeholder -->
                  <div class="flex items-center justify-center gap-0.5 sm:gap-1 h-12 sm:h-16 mb-3">
                    {Array.from({ length: 30 }).map((_, i) => (
                      <div 
                        class="waveform-bar bg-primary/30 w-0.5 sm:w-1 rounded-full transition-all duration-200"
                        style={`height: ${Math.random() * 60 + 20}%`}
                      ></div>
                    ))}
                  </div>

                  <!-- Progress bar -->
                  <div class="mb-3">
                    <input 
                      type="range" 
                      id="audio-progress" 
                      class="audio-slider w-full h-1.5 bg-primary/20 rounded-full appearance-none cursor-pointer"
                      min="0" 
                      max="100" 
                      value="0"
                    />
                    <div class="flex justify-between items-center mt-1.5 text-xs text-text-body/60">
                      <span id="current-time">0:00</span>
                      <span id="total-time">{vani.audio.duration}</span>
                    </div>
                  </div>

                  <!-- Controls -->
                  <div class="flex items-center justify-center gap-2 sm:gap-3">
                    <!-- Rewind 10s -->
                    <button
                      type="button"
                      id="rewind-btn"
                      class="p-1.5 sm:p-2 text-text-body/60 hover:text-primary active:text-primary transition-colors"
                      title="Rewind 10 seconds"
                    >
                      <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"/>
                      </svg>
                    </button>

                    <!-- Play/Pause -->
                    <button
                      type="button"
                      id="play-pause-btn"
                      class="w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center bg-primary text-white rounded-full shadow-lg transition-all duration-200 hover:bg-primary-hover hover:shadow-xl hover:scale-105 active:scale-95"
                    >
                      <svg id="play-icon" class="w-5 h-5 sm:w-6 sm:h-6 ml-0.5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z"/>
                      </svg>
                      <svg id="pause-icon" class="w-5 h-5 sm:w-6 sm:h-6 hidden" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                      </svg>
                    </button>

                    <!-- Forward 10s -->
                    <button
                      type="button"
                      id="forward-btn"
                      class="p-1.5 sm:p-2 text-text-body/60 hover:text-primary active:text-primary transition-colors"
                      title="Forward 10 seconds"
                    >
                      <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"/>
                      </svg>
                    </button>

                    <!-- Volume -->
                    <button
                      type="button"
                      id="volume-btn"
                      class="p-1.5 sm:p-2 text-text-body/60 hover:text-primary active:text-primary transition-colors"
                    >
                      <svg id="volume-icon" class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                      </svg>
                      <svg id="mute-icon" class="w-4 h-4 sm:w-5 sm:h-5 hidden" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"/>
                      </svg>
                    </button>
                  </div>

                  <!-- Download button -->
                  <a
                    href={vani.audio.url}
                    download
                    class="mt-3 sm:mt-4 w-full flex items-center justify-center gap-2 bg-white border border-primary/30 text-primary px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-xs sm:text-sm font-semibold shadow-sm transition-all duration-200 hover:bg-primary hover:text-white hover:border-primary active:scale-95"
                  >
                    <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                    </svg>
                    Download Audio
                  </a>
                </div>
              </div>
            )}

            <!-- Share Button (Desktop only) -->
            <div class="hidden lg:block p-4 border-t border-text-body/10">
              <button
                type="button"
                class="w-full flex items-center justify-center gap-2 bg-white border border-text-body/20 text-text-body px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-semibold transition-all duration-200 hover:border-primary hover:text-primary active:scale-95"
              >
                <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                </svg>
                Share
              </button>
            </div>
          </div>
        </aside>

        <!-- ============ PAGE CONTENT ============ -->
        <main>
          <div class="space-y-4 sm:space-y-6">
            {pages.map((page) => (
              <div
                id={`page-${page.pageNum}`}
                class="page-content bg-white rounded-xl border border-text-body/10 shadow-sm p-4 sm:p-6 lg:p-8"
              >
                <!-- Page number badge -->
                <div class="flex items-center justify-between mb-4 sm:mb-6 pb-3 sm:pb-4 border-b border-text-body/10">
                  <span class="inline-flex items-center gap-1.5 sm:gap-2 text-xs font-bold text-primary bg-primary/10 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-full">
                    <svg class="w-3 h-3 sm:w-3.5 sm:h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                    </svg>
                    {/* Page {page.pageNum} */}
                  </span>
                  
                  <!-- Page actions -->
                  <div class="flex items-center gap-1 sm:gap-2">
                    <button
                      type="button"
                      class="p-1.5 text-text-body/40 hover:text-primary active:text-primary transition-colors"
                      title="Copy text"
                    >
                      <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                      </svg>
                    </button>
                    <button
                      type="button"
                      class="p-1.5 text-text-body/40 hover:text-primary active:text-primary transition-colors"
                      title="Text size"
                    >
                      <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7"/>
                      </svg>
                    </button>
                  </div>
                </div>

                <!-- Content -->
                <div class="prose prose-sm sm:prose-base lg:prose-lg max-w-none">
                  {page.content.split('\n\n').map(paragraph => (
                    <p class="text-text-body text-sm sm:text-base leading-relaxed mb-3 sm:mb-4 last:mb-0">
                      {paragraph}
                    </p>
                  ))}
                </div>
              </div>
            ))}
          </div>

          <!-- ============ PAGINATION ============ -->
          <div class="mt-8 sm:mt-10 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-4">
            <a
              href="#"
              class="flex items-center justify-center gap-2 bg-white border border-text-body/20 text-text-body px-4 sm:px-5 py-2.5 rounded-full text-xs sm:text-sm font-semibold shadow-sm transition-all duration-200 hover:border-primary hover:text-primary hover:shadow-md active:scale-95"
            >
              <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
              </svg>
              <span class="truncate">Previous Lecture</span>
            </a>

            <a
              href="#"
              class="flex items-center justify-center gap-2 bg-primary text-white px-4 sm:px-5 py-2.5 rounded-full text-xs sm:text-sm font-semibold shadow-sm transition-all duration-200 hover:bg-primary-hover hover:shadow-lg active:scale-95"
            >
              <span class="truncate">Next Lecture</span>
              <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
              </svg>
            </a>
          </div>
        </main>

      </div>

      <!-- Hidden audio element -->
      {vani.audio.available && (
        <audio id="audio-element" src={vani.audio.url} preload="metadata"></audio>
      )}
    </div>
  </section>

</Layout>

<script>
// ============ AUDIO PLAYER ============
const audio = document.getElementById('audio-element');
const playPauseBtn = document.getElementById('play-pause-btn');
const playIcon = document.getElementById('play-icon');
const pauseIcon = document.getElementById('pause-icon');
const rewindBtn = document.getElementById('rewind-btn');
const forwardBtn = document.getElementById('forward-btn');
const volumeBtn = document.getElementById('volume-btn');
const volumeIcon = document.getElementById('volume-icon');
const muteIcon = document.getElementById('mute-icon');
const progressBar = document.getElementById('audio-progress');
const currentTimeEl = document.getElementById('current-time');
const totalTimeEl = document.getElementById('total-time');
const waveformBars = document.querySelectorAll('.waveform-bar');

let isPlaying = false;
let isMuted = false;

// Format time helper
function formatTime(seconds) {
  const mins = Math.floor(seconds / 60);
  const secs = Math.floor(seconds % 60);
  return `${mins}:${secs.toString().padStart(2, '0')}`;
}

// Play/Pause toggle
playPauseBtn?.addEventListener('click', () => {
  if (isPlaying) {
    audio.pause();
    playIcon.classList.remove('hidden');
    pauseIcon.classList.add('hidden');
    isPlaying = false;
  } else {
    audio.play();
    playIcon.classList.add('hidden');
    pauseIcon.classList.remove('hidden');
    isPlaying = true;
  }
});

// Rewind 10 seconds
rewindBtn?.addEventListener('click', () => {
  audio.currentTime = Math.max(0, audio.currentTime - 10);
});

// Forward 10 seconds
forwardBtn?.addEventListener('click', () => {
  audio.currentTime = Math.min(audio.duration, audio.currentTime + 10);
});

// Volume toggle
volumeBtn?.addEventListener('click', () => {
  if (isMuted) {
    audio.muted = false;
    volumeIcon.classList.remove('hidden');
    muteIcon.classList.add('hidden');
    isMuted = false;
  } else {
    audio.muted = true;
    volumeIcon.classList.add('hidden');
    muteIcon.classList.remove('hidden');
    isMuted = true;
  }
});

// Update progress bar and time
audio?.addEventListener('timeupdate', () => {
  const progress = (audio.currentTime / audio.duration) * 100;
  progressBar.value = progress;
  currentTimeEl.textContent = formatTime(audio.currentTime);
});

// Set total duration
audio?.addEventListener('loadedmetadata', () => {
  totalTimeEl.textContent = formatTime(audio.duration);
});

// Seek functionality
progressBar?.addEventListener('input', (e) => {
  const time = (e.target.value / 100) * audio.duration;
  audio.currentTime = time;
});

// Waveform animation when playing
audio?.addEventListener('play', () => {
  waveformBars.forEach((bar, index) => {
    setInterval(() => {
      if (isPlaying) {
        const randomHeight = Math.random() * 60 + 20;
        bar.style.height = `${randomHeight}%`;
        bar.style.backgroundColor = randomHeight > 60 ? '#f97316' : 'rgba(249, 115, 22, 0.3)';
      }
    }, 200 + index * 10);
  });
});

// Reset waveform when paused
audio?.addEventListener('pause', () => {
  waveformBars.forEach((bar) => {
    bar.style.backgroundColor = 'rgba(249, 115, 22, 0.3)';
  });
});
</script>

<style>
  /* Custom prose styles */
  .prose p {
    text-align: justify;
    hyphens: auto;
  }

  @media (max-width: 640px) {
    .prose p {
      text-align: left;
      hyphens: none;
    }
  }

  /* Custom audio slider styles */
  .audio-slider::-webkit-slider-thumb {
    appearance: none;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #f97316;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: all 0.2s;
  }

  @media (min-width: 640px) {
    .audio-slider::-webkit-slider-thumb {
      width: 14px;
      height: 14px;
    }
  }

  .audio-slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
    box-shadow: 0 2px 8px rgba(249, 115, 22, 0.4);
  }

  .audio-slider::-webkit-slider-thumb:active {
    transform: scale(1.1);
  }

  .audio-slider::-moz-range-thumb {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #f97316;
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: all 0.2s;
  }

  @media (min-width: 640px) {
    .audio-slider::-moz-range-thumb {
      width: 14px;
      height: 14px;
    }
  }

  .audio-slider::-moz-range-thumb:hover {
    transform: scale(1.2);
    box-shadow: 0 2px 8px rgba(249, 115, 22, 0.4);
  }

  .audio-slider::-moz-range-thumb:active {
    transform: scale(1.1);
  }

  /* Progress bar fill */
  .audio-slider {
    background: linear-gradient(to right, #f97316 0%, #f97316 var(--value, 0%), rgba(249, 115, 22, 0.2) var(--value, 0%), rgba(249, 115, 22, 0.2) 100%);
  }

  /* Waveform bars animation */
  .waveform-bar {
    transition: height 0.2s ease, background-color 0.2s ease;
  }

</style>